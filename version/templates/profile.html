{% extends "base.html" %} {% block header %}

<link rel="stylesheet" href="static/css/profile.css" />

<title>{{title}}</title>

{% endblock %} {% block content %}
<div class="main">
  <h1 style="margin-bottom: 2rem; margin-top: 42px">Dashboard</h1>
  <div class="mycontainer">
    <div class="leftdiv">
      <div class="mycard">
        <a
          class="tablinks active"
          onclick="openTab(event, 'Update')"
          href="#"
          id="one"
          >Update Profile</a
        >
        <a
          class="tablinks"
          onclick="openTab(event, 'Register')"
          href="#"
          id="two"
          >Register for Events</a
        >
        <a
          class="tablinks"
          onclick="openTab(event, 'Feedback')"
          href="#"
          id="three"
          >Feedback</a
        >
      </div>
    </div>
    <div class="rightdiv">
      {% include 'message.html' %}
      <div id="Update" class="tabcontent active" style="display: flex">
        <form
          action="{{url_for('profile')}}"
          method="POST"
          enctype="multipart/form-data"
        >
          <div class="formcard" style="padding: 80px">
            <div class="content">
              <table cellpadding="0" cellspacing="0">
                <tbody>
                  <tr>
                    <td><label id="email">Name</label></td>
                    <td>
                      <i class="fas fa-user"></i
                      ><input
                        type="text"
                        id="name"
                        value="{{user.name}}"
                        name="name"
                        required
                      />
                    </td>
                  </tr>
                  <tr>
                    <td><label id="email">Email</label></td>
                    <td>
                      <i class="fas fa-envelope"></i
                      ><input
                        type="email"
                        id="name"
                        value="{{user.email}}"
                        name="email"
                        required
                      />
                    </td>
                  </tr>
                  <tr>
                    <td><label id="degree">Gender</label></td>

                    <td>
                      <select
                        id="male"
                        value="{{user.gender}}"
                        name="gender"
                        required
                      >
                        <option value="{{user.gender}}" selected hidden>
                          {{user.gender}}
                        </option>
                        <option value="Male">Male</option>
                        <option value="Female">Female</option>
                        <option value="Other">Other</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label id="contact">Contact Number(WhatsApp)</label>
                    </td>
                    <td>
                      <i class="fas fa-phone"></i
                      ><input
                        type="tel"
                        maxlength="10"
                        minlength="10"
                        id="contact"
                        value="{{user.contact}}"
                        name="contact"
                        required
                      />
                    </td>
                  </tr>

                  <tr>
                    <td>
                      <label id="contact"
                        >Permanent Roll No/Registration No(College)</label
                      >
                    </td>
                    <td>
                      <i class="fas fa-number"></i
                      ><input
                        type="text"
                        id="contact"
                        value="{{user.roll}}"
                        name="roll"
                        required
                      />
                    </td>
                  </tr>
                  <tr>
                    <td><label id="year">Year of Study</label></td>
                    <td>
                      <select
                        id="year"
                        value="{{user.year}}"
                        name="year"
                        required
                      >
                        <option value="{{user.year}}" selected hidden>
                          {{user.year}}
                        </option>
                        <option value="first">First</option>
                        <option value="second">Second</option>
                        <option value="third">Third</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td><label id="hack">Hackerearth Id / Username</label></td>
                    <td>
                      <input
                        type="text"
                        value="{{user.hackid}}"
                        name="hackid"
                        id="city"
                        required
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <!-- <h2>College Details:</h2> -->
          <div class="formcard">
            <div class="content">
              <table cellpadding="0" cellspacing="0">
                <tbody>
                  <tr>
                    <td>
                      <label id="institute"
                        >Institute you're representing[*Full Name] &nbsp; &nbsp;
                      </label>
                    </td>
                    <td>
                      <i class="fas fa-university"></i
                      ><input
                        type="text"
                        value="{{user.iname}}"
                        name="iname"
                        id="institute"
                        required
                      />
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label id="instituteaddress"
                        >Your Institute's Postal Address</label
                      >
                    </td>
                    <td>
                      <i class="fas fa-map-marked-alt"></i
                      ><textarea
                        id="instituteaddress"
                        name="address"
                        rows="4"
                        required
                      >
{{user.address}}</textarea
                      >
                    </td>
                  </tr>
                  <tr>
                    <td><label id="city">City</label></td>
                    <td>
                      <i class="fas fa-city"></i
                      ><input
                        type="text"
                        id="city"
                        value="{{user.city}}"
                        name="city"
                        required
                      />
                    </td>
                  </tr>
                  <tr>
                    <td><label id="state">State</label></td>
                    <td>
                      <select
                        id="state"
                        value="{{user.state}}"
                        name="state"
                        required
                      >
                        <option value="{{user.state}}" selected hidden>
                          {{user.state}}
                        </option>
                        <option value="Andaman and Nicobar Islands">
                          Andaman and Nicobar Islands
                        </option>
                        <option value="Andhra Pradesh">Andhra Pradesh</option>
                        <option value="Arunachal Pradesh">
                          Arunachal Pradesh
                        </option>
                        <option value="Assam">Assam</option>
                        <option value="Bihar">Bihar</option>
                        <option value="Chandigarh">Chandigarh</option>
                        <option value="Chhattisgarh">Chhattisgarh</option>
                        <option value="Dadra and Nagar Haveli">
                          Dadra and Nagar Haveli
                        </option>
                        <option value="Daman and Diu">Daman and Diu</option>
                        <option value="Delhi">Delhi</option>
                        <option value="Goa">Goa</option>
                        <option value="Gujarat">Gujarat</option>
                        <option value="Haryana">Haryana</option>
                        <option value="Himachal Pradesh">
                          Himachal Pradesh
                        </option>
                        <option value="Jammu and Kashmir">
                          Jammu and Kashmir
                        </option>
                        <option value="Jharkhand">Jharkhand</option>
                        <option value="Karnataka">Karnataka</option>
                        <option value="Kerala">Kerala</option>
                        <option value="Lakshadweep">Lakshadweep</option>
                        <option value="Madhya Pradesh">Madhya Pradesh</option>
                        <option value="Maharashtra">Maharashtra</option>
                        <option value="Manipur">Manipur</option>
                        <option value="Meghalaya">Meghalaya</option>
                        <option value="Mizoram">Mizoram</option>
                        <option value="Nagaland">Nagaland</option>
                        <option value="Orissa">Orissa</option>
                        <option value="Pondicherry">Pondicherry</option>
                        <option value="Punjab">Punjab</option>
                        <option value="Rajasthan">Rajasthan</option>
                        <option value="Sikkim">Sikkim</option>
                        <option value="Tamil Nadu">Tamil Nadu</option>
                        <option value="Tripura">Telangana</option>
                        <option value="Tripura">Tripura</option>
                        <option value="Uttaranchal">Uttaranchal</option>
                        <option value="Uttar Pradesh">Uttar Pradesh</option>
                        <option value="West Bengal">West Bengal</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <td><label id="pincode">Pincode</label></td>
                    <td>
                      <i class="fas fa-map-pin"></i
                      ><input
                        type="number"
                        value="{{user.pin}}"
                        name="pin"
                        id="pincode"
                        max="999999"
                        min="100000"
                        required
                      />
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>
          <div class="formcard">
            <div class="content">
              <input type="submit" id="update" value="Update" href="#" />
            </div>
          </div>
        </form>
      </div>

      <div class="twodiv tabcontent" id="Register">
        {% for event,reg in events %}
        <div class="formcard">
          <div class="content1">
            <h2>{{event.name}}</h2>
            <div class="links">
              {% if reg %}
              <a class="button1 bg-secondary">Registered</a> {% else %}
              <a
                data-bs-toggle="modal"
                data-bs-target="#event-{{event.id}}"
                class="button1"
                >Register</a
              >
              {% endif %}
              <p>
                <a href="{{ url_for('desc', id=event.id) }}">Know more</a> about
                the Event
              </p>
            </div>
          </div>
        </div>
        <div
          class="modal fade"
          id="event-{{event.id}}"
          tabindex="-1"
          aria-labelledby="exampleModalLabel"
          aria-hidden="true"
        >
          <div class="modal-dialog">
            <div class="modal-content">
              <div class="modal-header">
                <h5 class="modal-title" id="exampleModalLabel">
                  {{event.name}} Registration
                </h5>
                <button
                  type="button"
                  class="btn-close"
                  data-bs-dismiss="modal"
                  aria-label="Close"
                ></button>
              </div>
              <div class="modal-body">
                <p style="color: #000">
                  Are you sure want to register for {{event.name}} ?
                </p>
              </div>
              <div class="modal-footer">
                <form
                  action="{{url_for('registration', id =event.id)}}"
                  method="POST"
                >
                  <input
                    type="number"
                    name="scrim1id"
                    value="{{user.id}}"
                    hidden
                  />

                  <button
                    type="button"
                    class="btn btn-sm btn-danger"
                    data-bs-dismiss="modal"
                  >
                    Not now
                  </button>
                  <button type="submit" class="btn btn-sm btn-success">
                    Register
                  </button>
                </form>
              </div>
            </div>
          </div>
        </div>
        {% endfor %}
      </div>

      <div class="threediv tabcontent" id="Feedback">
        {% for event in pop %}
        <div class="formcard">
          <div class="content1">
            <h2>Feedback</h2>

            <div class="links">
              {% if event in pop1 %}
              <a class="button1 bg-secondary">{{event.name}}</a>
              <p>Your Feedback is submitted.</p>
              {% else %}
              <a href="{{url_for('feedback', id=event.id)}}" class="button1"
                >{{event.name}}</a
              >
              {% endif %}
            </div>
          </div>
        </div>
        {% endfor %}
      </div>
    </div>
  </div>

  <script>
    function openTab(evt, tabName) {
      var i, tabcontent, tablinks;
      tabcontent = document.getElementsByClassName("tabcontent");
      for (i = 0; i < tabcontent.length; i++) {
        tabcontent[i].style.display = "none";
      }
      tablinks = document.getElementsByClassName("tablinks");
      for (i = 0; i < tablinks.length; i++) {
        tablinks[i].className = tablinks[i].className.replace(" active", "");
      }
      document.getElementById(tabName).style.display = "flex";
      evt.currentTarget.className += " active";
    }
  </script>
  {% include "footer.html" %}
</div>
{% endblock %}
